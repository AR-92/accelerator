<!-- Activity Management Content -->
<div class="max-w-7xl mx-auto rounded-xl overflow-hidden flex flex-col mx-4 my-4">

  <!-- Page Header -->
  <header class="sticky top-0 z-20 text-card-foreground p-5 border-b border-border">
   <!-- Page Title and Description -->
   <div class="mb-6 flex justify-between">

     <div class="text-left">
       <h1 class="text-3xl font-bold text-card-foreground mb-2">Activity Management</h1>
       <p class="text-muted-foreground">Manage and organize all system activity efficiently</p>
     </div>

   </div>
    <div class="max-w-7xl mx-auto flex items-center gap-4">
    </div>
   </header>
   <div class="p-6 space-y-6">
      <!-- Activity Stats -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
{{#> stats-card icon="bar-chart-3" title="Activities" link="#"}}
{{> stats-item label="Total" value=activityStats.total}}
{{> stats-item label="Today" value=activityStats.today color="text-green-600"}}
{{/stats-card}}

{{#> stats-card icon="calendar" title="Today" link="#"}}
{{> stats-item label="Activities" value=activityStats.today}}
{{/stats-card}}

{{#> stats-card icon="bar-chart-3" title="This Week" link="#"}}
{{> stats-item label="Activities" value=activityStats.thisWeek}}
{{/stats-card}}

{{#> stats-card icon="alert-triangle" title="Failed Actions" link="#"}}
{{> stats-item label="Count" value=activityStats.failed}}
{{/stats-card}}
      </div>

     <!-- Activity Filters and Search -->
     <div class="bg-card rounded-lg border border-border">
       <div class="p-6 border-b border-border">
         <div class="flex items-center justify-between">
           <h3 class="text-lg font-semibold text-card-foreground">Activity Log</h3>
           <div class="flex items-center space-x-4">
             <div class="relative">
               <input type="text" placeholder="Search activities..." class="w-64 pl-4 pr-4 py-2 border border-input rounded-md focus:outline-none   focus:border-transparent">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  {{{icon 'search' size='20' class='text-muted-foreground'}}}
                </div>
             </div>
             <select class="px-3 py-2 border border-input rounded-md focus:outline-none   focus:border-transparent">
               <option value="all">All Types</option>
               <option value="login">Login</option>
               <option value="user">User Management</option>
               <option value="system">System</option>
               <option value="security">Security</option>
             </select>
             <select class="px-3 py-2 border border-input rounded-md focus:outline-none   focus:border-transparent">
               <option value="all">All Status</option>
               <option value="success">Success</option>
               <option value="failed">Failed</option>
               <option value="warning">Warning</option>
             </select>
           </div>
         </div>
       </div>

       <!-- Activity Timeline -->
       <div class="p-6">
         <div class="flow-root">
           <ul role="list" class="-mb-8">
             {{#each activities}}
             <li>
               <div class="relative pb-8">
                 {{#unless @first}}
                 <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-muted" aria-hidden="true"></span>
                 {{/unless}}
                 <div class="relative flex space-x-3">
                   <div>
                      <span class="h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-background {{#eq status "success"}}bg-success{{else if eq status "failed"}}bg-destructive{{else if eq status "warning"}}bg-warning{{else}}bg-primary{{/eq}}">
                        {{#eq activity_type "login"}}
                        {{{icon 'log-in' size='20' class='text-white'}}}
                        {{else if eq activity_type "user"}}
                        {{{icon 'user' size='20' class='text-white'}}}
                        {{else if eq activity_type "system"}}
                        {{{icon 'server' size='20' class='text-white'}}}
                        {{else}}
                        {{{icon 'lock' size='20' class='text-white'}}}
                        {{/eq}}
                     </span>
                   </div>
                   <div class="min-w-0 flex-1 pt-1.5">
                     <div class="flex items-center justify-between">
                       <p class="text-sm font-medium text-card-foreground">{{action}}</p>
                       <p class="text-sm text-muted-foreground">{{created_at}}</p>
                     </div>
                     <p class="text-sm text-muted-foreground mt-1">{{description}}</p>
                     <div class="flex items-center mt-2 space-x-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{#eq activity_type "login"}}bg-primary/10 text-primary{{else if eq activity_type "user"}}bg-success/10 text-success{{else if eq activity_type "system"}}bg-secondary/10 text-secondary{{else if eq activity_type "security"}}bg-destructive/10 text-destructive{{else}}bg-muted/50 text-muted-foreground{{/eq}}">
                         {{activity_type}}
                       </span>
                       {{#if user_id}}
                       <span class="text-sm text-muted-foreground">User ID: {{user_id}}</span>
                       {{/if}}
                       {{#if ip_address}}
                       <span class="text-sm text-muted-foreground">{{ip_address}}</span>
                       {{/if}}
                       {{#if browser}}
                       <span class="text-sm text-muted-foreground">{{browser}}</span>
                       {{/if}}
                     </div>
                   </div>
                 </div>
               </div>
             </li>
             {{/each}}
           </ul>
         </div>

         {{#if (eq activities.length 0)}}
         <!-- Empty State -->
         <div class="text-center py-12">
{{{icon 'clipboard-list' size='48' class='mx-auto text-muted-foreground'}}}
           <h3 class="mt-2 text-sm font-medium text-card-foreground">No activity found</h3>
           <p class="mt-1 text-sm text-muted-foreground">No activity has been logged yet.</p>
         </div>
         {{/if}}
       </div>

       {{#if activities.length}}
       <!-- Pagination -->
       <div class="px-6 py-4 border-t border-border">
         <div class="flex items-center justify-between">
           <div class="text-sm text-card-foreground">
             Showing {{pagination.start}} to {{pagination.end}} of {{pagination.total}} activities
           </div>
           <div class="flex items-center space-x-2">
             {{#if pagination.hasPrev}}
             <a href="?page={{pagination.prevPage}}" class="px-3 py-2 text-sm font-medium text-muted-foreground bg-card border border-input rounded-md hover:bg-accent">
               Previous
             </a>
             {{/if}}
             {{#each pagination.pages}}
             <a href="?page={{this}}" class="px-3 py-2 text-sm font-medium {{#if (eq this ../pagination.currentPage)}}text-primary bg-accent border-primary{{else}}text-muted-foreground bg-card border-input{{/if}} border rounded-md hover:bg-accent">
               {{this}}
             </a>
             {{/each}}
             {{#if pagination.hasNext}}
             <a href="?page={{pagination.nextPage}}" class="px-3 py-2 text-sm font-medium text-muted-foreground bg-card border border-input rounded-md hover:bg-accent">
               Next
             </a>
             {{/if}}
           </div>
         </div>
       </div>
       {{/if}}
     </div>

     <!-- Export Options -->
     {{#if activities.length}}
     <div class="bg-card rounded-lg border border-border p-6">
       <div class="flex items-center justify-between">
         <div>
           <h3 class="text-lg font-semibold text-card-foreground">Export Activity Log</h3>
           <p class="text-sm text-muted-foreground">Download activity logs for auditing and compliance</p>
         </div>
         <div class="flex items-center space-x-4">
            <button class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors">
              {{{icon 'download' size='16' class='mr-2 inline'}}}
              Export CSV
            </button>
            <button class="px-4 py-2 bg-success text-success-foreground rounded-lg hover:bg-success/90 transition-colors">
              {{{icon 'file-text' size='16' class='mr-2 inline'}}}
              Export PDF
            </button>
         </div>
       </div>
     </div>
     {{/if}}
   </div>
</div>