<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <link rel="icon" type="image/svg+xml" href="/images/favcon.svg">
     <link href="/css/main.css" rel="stylesheet">
     <link href="/css/charts.css" rel="stylesheet">
     <link href="/css/scroll.css" rel="stylesheet">
     <link href="/css/animate.min.css" rel="stylesheet">
     <script src="/js/htmx.min.js"></script>
    <style>
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
    </style>
</head>

<body class="h-screen flex bg-background font-sans text-foreground overflow-hidden">
    <!-- Full height sidebar -->
     {{> ui/build-start-up}}

    <!-- Right side with navbar and main content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Navbar will be loaded here, starting where sidebar ends -->
        <div id="navbar" class="z-[100] flex-shrink-0">
             {{> navbars/navbar}}
        </div>

          <!-- Main Content -->
          <div class="flex-1 flex overflow-auto">
              {{{body}}}
          </div>
      </div>

      <!-- Toast Notifications -->
       {{> widgets/_toast}}

        <script src="/js/sidebar-toggle.js"></script>
        <script src="/js/framework-utils.js"></script>
        <script src="/js/toast.js"></script>
        <script>
          // Load user settings for theme management
          async function loadUserSettings() {
            try {
              const response = await fetch('/api/settings');
              if (response.ok) {
                const data = await response.json();
                window.userSettings = data.settings;
              }
            } catch (error) {
              console.warn('Failed to load user settings:', error);
            }
          }
          // Load settings if user is authenticated
          {{#if user}}loadUserSettings();{{/if}}
        </script>
        <script src="/src/utils/theme.js"></script>


 </html>