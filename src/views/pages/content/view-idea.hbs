<div class='w-full mx-auto p-6 bg-white min-h-screen'>
  <!-- Back Button -->
  <div class='mb-6'>
    <button
      onclick='window.history.back()'
      class='flex items-center text-gray-600 hover:text-gray-900'
    >
      <svg
        xmlns='http://www.w3.org/2000/svg'
        class='h-5 w-5 mr-1'
        viewBox='0 0 20 20'
        fill='currentColor'
      >
        <path
          fill-rule='evenodd'
          d='M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z'
          clip-rule='evenodd'
        />
      </svg>
      Back
    </button>
  </div>

  <!-- Main Idea Content -->
  <div class='bg-gray-50 rounded-xl p-6 mb-6'>
    <div class='flex flex-col md:flex-row gap-6'>
      <!-- Idea Image/Preview -->
      <div class='md:w-2/5'>
        <div
          class='idea-preview bg-gray-200 border-2 border-dashed rounded-xl w-full h-64 flex items-center justify-center bg-cover bg-center'
          style="background-image: url('/images/previews/default-preview.jpg');"
        >
          <span class='text-gray-500'>Idea Preview</span>
        </div>
      </div>

      <!-- Idea Details -->
      <div class='md:w-3/5'>
        <h1 class='text-2xl font-bold text-gray-900 mb-2 idea-title'>Interactive
          Türkiye Province Map</h1>
        <div class='flex items-center gap-2 mb-4'>
          <span
            class='px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full idea-type'
          >Code</span>
          <span class='text-gray-500 idea-created'>by Alex Johnson on 2024-02-15</span>
        </div>
        <p class='text-gray-700 mb-4 idea-description'>A detailed interactive
          map of Türkiye's provinces with data visualization capabilities.</p>
        <div class='flex flex-wrap gap-2 mb-4 idea-tags'>
          <span
            class='px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full idea-tag'
          >Mapping</span>
          <span
            class='px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full idea-tag'
          >Data</span>
          <span
            class='px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full idea-tag'
          >Visualization</span>
        </div>
        <div class='flex items-center justify-between'>
          <div class='flex items-center'>
            <div class='flex text-yellow-400'>
              <svg class='w-5 h-5 fill-current' viewBox='0 0 24 24'>
                <path
                  d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'
                />
              </svg>
              <svg class='w-5 h-5 fill-current' viewBox='0 0 24 24'>
                <path
                  d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'
                />
              </svg>
              <svg class='w-5 h-5 fill-current' viewBox='0 0 24 24'>
                <path
                  d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'
                />
              </svg>
              <svg class='w-5 h-5 fill-current' viewBox='0 0 24 24'>
                <path
                  d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'
                />
              </svg>
              <svg class='w-5 h-5 fill-current' viewBox='0 0 24 24'>
                <path
                  d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'
                />
              </svg>
            </div>
            <span class='ml-2 text-gray-600 idea-rating'>4.8 (128 votes)</span>
          </div>
          <div class='flex space-x-3'>
            <button class='text-gray-500 hover:text-blue-500'>
              <svg
                xmlns='http://www.w3.org/2000/svg'
                class='h-6 w-6'
                fill='none'
                viewBox='0 0 24 24'
                stroke='currentColor'
              >
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z'
                />
              </svg>
            </button>
            <button class='text-gray-500 hover:text-red-500'>
              <svg
                xmlns='http://www.w3.org/2000/svg'
                class='h-6 w-6'
                fill='none'
                viewBox='0 0 24 24'
                stroke='currentColor'
              >
                <path
                  stroke-linecap='round'
                  stroke-linejoin='round'
                  stroke-width='2'
                  d='M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z'
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

   <!-- Two Column Layout: Details and Voting -->
   <div class='grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6'>
     <!-- Left Column: Idea Details -->
     <div class='bg-white rounded-xl p-6'>
       <h2 class='text-xl font-bold text-gray-900 mb-4'>Idea Details</h2>
       <div class='prose max-w-none'>
         <p>This idea focuses on creating an interactive map of Türkiye's provinces
           with detailed data visualization capabilities. The map will allow users
           to explore various demographic, economic, and geographic information
           about each province.</p>
         <h3>Key Features:</h3>
         <ul>
           <li>Interactive map with hover/click functionality</li>
           <li>Data visualization for each province</li>
           <li>Filtering and sorting options</li>
           <li>Export functionality for reports</li>
           <li>Mobile-responsive design</li>
         </ul>
         <h3>Technologies:</h3>
         <p>This project would utilize modern web technologies including
           JavaScript, D3.js for visualization, and a mapping library such as
           Leaflet or Google Maps API.</p>
         <h3>Implementation Steps:</h3>
         <ol>
           <li>Research and gather data for each province</li>
           <li>Design the UI/UX for the map interface</li>
           <li>Implement the base map functionality</li>
           <li>Add data visualization components</li>
           <li>Implement filtering and export features</li>
           <li>Test and refine the user experience</li>
         </ol>
       </div>
     </div>

     <!-- Right Column: Minimal Rating Widget -->
     <div class='bg-white p-6'>
       <!-- Header -->
       <div class='mb-8'>
         <h2 class='text-xl font-medium text-gray-900 mb-2'>Evaluate this idea</h2>
         <p class='text-gray-600 text-sm'>Check all that apply</p>
       </div>

       <!-- Simple Questions -->
       <div class='space-y-4'>
         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-1' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Does this solve a real problem?</span>
         </label>

         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-2' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Is it technically feasible to build?</span>
         </label>

         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-3' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Does it have market potential?</span>
         </label>

         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-4' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Is it innovative or unique?</span>
         </label>

         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-5' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Can it scale to reach more users?</span>
         </label>

         <label class='flex items-start space-x-3 cursor-pointer p-3 rounded-md hover:bg-gray-50 transition-colors'>
           <input type='checkbox' name='question-6' class='w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-500 mt-0.5'>
           <span class='text-sm text-gray-700'>Is it sustainable long-term?</span>
         </label>
       </div>

       <!-- Submit Section -->
       <div class='mt-8 pt-6 border-t border-gray-200'>
         <div class='flex items-center justify-between mb-4'>
           <div>
             <div class='text-sm text-gray-600 mb-1'>Your rating</div>
             <div class='text-lg font-medium overall-rating'>Not rated yet</div>
           </div>
           <div class='text-right'>
             <div class='text-sm text-gray-600 mb-1'>Community</div>
             <div class='text-lg font-medium community-score'>4.3</div>
           </div>
         </div>
         <button id='submit-vote' class='w-full bg-gray-900 text-white font-medium py-2 px-4 rounded-md hover:bg-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-900' disabled>
           Submit
         </button>
       </div>
     </div>
   </div>

   <!-- Activity Section -->
  <div class='bg-white rounded-xl p-6'>
    <h2 class='text-xl font-bold text-gray-900 mb-4'>Community Activity</h2>
    <div class='space-y-4'>
      <div class='flex items-start'>
        <div
          class='bg-gray-200 border-2 border-dashed rounded-xl w-10 h-10 flex-shrink-0'
        ></div>
        <div class='ml-3'>
          <div class='font-medium text-gray-900'>Alex Johnson</div>
          <div class='text-sm text-gray-600'>Commented 3 hours ago</div>
          <p class='mt-1 text-gray-700'>This is a great idea! It would be
            helpful to include historical data trends as well.</p>
        </div>
      </div>
      <div class='flex items-start'>
        <div
          class='bg-gray-200 border-2 border-dashed rounded-xl w-10 h-10 flex-shrink-0'
        ></div>
        <div class='ml-3'>
          <div class='font-medium text-gray-900'>Maria Garcia</div>
          <div class='text-sm text-gray-600'>Shared this idea 1 day ago</div>
          <p class='mt-1 text-gray-700'>I've been looking for something like
            this for a project. Would love to collaborate!</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Simple routing for different ideas based on URL hash
  document.addEventListener('DOMContentLoaded', function() { // Default idea if
  no hash is provided let ideaSlug = window.location.hash.substring(1); if
  (!ideaSlug) { ideaSlug = 'interactive-turkiye-map'; // Default idea
  window.location.hash = ideaSlug; } // Define idea data based on slug const
  ideasData = { 'interactive-turkiye-map': { title: 'Interactive Türkiye
  Province Map', type: 'Code', description: 'A detailed interactive map of
  Türkiye\'s provinces with data visualization capabilities.', tags: ['Mapping',
  'Data', 'Visualization'], rating: '4.8 (128 votes)', creator: 'Alex Johnson',
  createdDate: '2024-02-15', contentPreview: 'map-preview.jpg', details: {
  description: 'This idea focuses on creating an interactive map of Türkiye\'s
  provinces with detailed data visualization capabilities. The map will allow
  users to explore various demographic, economic, and geographic information
  about each province.', features: [ 'Interactive map with hover/click
  functionality', 'Data visualization for each province', 'Filtering and sorting
  options', 'Export functionality for reports', 'Mobile-responsive design' ],
  technologies: 'This project would utilize modern web technologies including
  JavaScript, D3.js for visualization, and a mapping library such as Leaflet or
  Google Maps API.', implementation: [ 'Research and gather data for each
  province', 'Design the UI/UX for the map interface', 'Implement the base map
  functionality', 'Add data visualization components', 'Implement filtering and
  export features', 'Test and refine the user experience' ] } },
  'squid-game-explained': { title: 'Squid Game Season 3 Plot Explained in 5
  Minutes', type: 'Audio', description: 'A quick overview of the anticipated
  Squid Game Season 3 plot with theories and predictions.', tags:
  ['Entertainment', 'Video'], rating: '4.5 (96 votes)', creator: 'Sarah
  Williams', createdDate: '2024-03-22', contentPreview: 'audio-preview.jpg',
  details: { description: 'This idea provides an animated explanation of the
  predicted plot for Squid Game Season 3, exploring fan theories and official
  hints about the upcoming season.', features: [ 'Animated video content',
  'Character analysis', 'Plot predictions based on available clues', 'Comparison
  with Season 2', 'Interactive elements for engagement' ], technologies: 'This
  would use video editing software, animation tools, and content management for
  hosting.', implementation: [ 'Research available information about Season 3',
  'Script and storyboard creation', 'Animation and video production', 'Audio
  narration and music', 'Publishing and distribution', 'Engagement tracking and
  feedback' ] } }, 'sales-trends-chart': { title: 'High-Resolution Line Chart of
  Monthly Sales Trends', type: 'PDF', description: 'A comprehensive analysis of
  sales trends with interactive visualizations.', tags: ['Data', 'Analytics'],
  rating: '4.7 (78 votes)', creator: 'Michael Chen', createdDate: '2024-01-10',
  contentPreview: 'chart-preview.jpg', details: { description: 'This idea
  involves creating a detailed analysis of sales trends using high-resolution
  line charts with interactive capabilities to help businesses understand their
  performance.', features: [ 'Interactive line charts', 'Multiple data series
  comparison', 'Zoom and pan functionality', 'Export options (PDF, PNG, SVG)',
  'Customizable time ranges' ], technologies: 'This project would use JavaScript
  charting libraries like Chart.js, D3.js, or Highcharts along with data
  processing tools.', implementation: [ 'Data collection and cleaning', 'Design
  chart visualizations', 'Implement interactive chart features', 'Add export
  functionality', 'Optimize for performance', 'User testing and feedback' ] } },
  'serapeum-saqqara': { title: 'Serapeum at Saqqara: History & Purpose', type:
  'Document', description: 'Detailed historical analysis of the Serapeum of
  Saqqara and its significance in ancient Egypt.', tags: ['History',
  'Education'], rating: '4.9 (42 votes)', creator: 'Dr. Emma Wilson',
  createdDate: '2024-02-28', contentPreview: 'document-preview.jpg', details: {
  description: 'This idea presents a comprehensive analysis of the Serapeum of
  Saqqara, exploring its historical context, architectural significance, and
  role in ancient Egyptian society.', features: [ 'Detailed historical context',
  'Architectural analysis', 'Cultural significance exploration', 'Interactive
  timeline', 'Image gallery of artifacts' ], technologies: 'This would utilize a
  content management system with rich text editing capabilities and multimedia
  support.', implementation: [ 'Research historical sources', 'Compile
  archaeological evidence', 'Create visual aids and diagrams', 'Develop
  interactive timeline', 'Implement content management', 'User feedback and
  review' ] } }, 'ai-presentation-2025': { title: 'Most Viral AI Product in 2025
  Presentation', type: 'Slides', description: 'A presentation showcasing the
  most viral AI products predicted for 2025.', tags: ['AI', 'Future'], rating:
  '4.6 (87 votes)', creator: 'David Rodriguez', createdDate: '2024-04-05',
  contentPreview: 'slides-preview.jpg', details: { description: 'This
  presentation explores the anticipated AI products that will gain viral status
  in 2025, analyzing trends and consumer behavior.', features: [ 'Market trend
  analysis', 'Prediction algorithms', 'Interactive charts and graphs', 'Expert
  opinions', 'Regular updates' ], technologies: 'This would use presentation
  software with interactive features and data visualization capabilities.',
  implementation: [ 'Gather market trends', 'Analyze current AI technologies',
  'Predict future developments', 'Design compelling visuals', 'Build interactive
  elements', 'Regular content updates' ] } }, 'ab-test-visual': { title:
  'Side-by-Side Bar Chart for A/B Test Results', type: 'Image', description: 'A
  clean visualization comparing A/B test results with side-by-side bar charts.',
  tags: ['Data', 'Analytics'], rating: '4.4 (56 votes)', creator: 'Jennifer
  Kim', createdDate: '2024-03-15', contentPreview: 'image-preview.jpg', details:
  { description: 'This visualization tool helps teams understand A/B test
  results by providing clear, comparative bar charts.', features: [
  'Side-by-side comparison', 'Statistical significance indicators', 'Multiple
  metrics display', 'Export options', 'Customizable colors' ], technologies:
  'This would use visualization libraries like D3.js or Chart.js with custom
  styling.', implementation: [ 'Design chart components', 'Integrate with
  analytics tools', 'Implement export functionality', 'Add customization
  options', 'User testing and feedback' ] } }, 'life-journey-animation': {
  title: 'Cinematic Time-Lapse Cartoon of Human Life Journey', type: 'Video',
  description: 'A beautiful animated representation of life\'s journey from
  birth to old age.', tags: ['Entertainment', 'Animation'], rating: '4.8 (103
  votes)', creator: 'Robert Taylor', createdDate: '2024-02-10', contentPreview:
  'video-preview.jpg', details: { description: 'This animation captures the
  beautiful stages of human life in a cinematic format, highlighting key moments
  and transitions.', features: [ 'Life stages representation', 'Emotional
  storytelling', 'High-quality animation', 'Narrative music', 'Shareable format'
  ], technologies: 'This would use animation software like After Effects or
  Blender with professional sound design tools.', implementation: [ 'Create
  storyboards', 'Design character models', 'Animate life stages', 'Add musical
  score', 'Final rendering and optimization' ] } }, 'crossword-generator': {
  title: 'Crossword Puzzle Generator Features and Options Explained', type:
  'Website', description: 'Interactive crossword puzzle generator with
  customizable themes and difficulty levels.', tags: ['Education', 'Game'],
  rating: '4.7 (72 votes)', creator: 'Lisa Anderson', createdDate: '2024-01-20',
  contentPreview: 'website-preview.jpg', details: { description: 'This tool
  allows users to create custom crossword puzzles based on their own word lists
  and themes.', features: [ 'Custom word lists', 'Difficulty levels', 'Theme
  selection', 'Printable output', 'Share functionality' ], technologies: 'This
  would use web technologies including HTML5, CSS3, JavaScript, and a backend
  for puzzle generation.', implementation: [ 'Design algorithm for puzzle
  generation', 'Create UI for customization', 'Implement print functionality',
  'Add social sharing', 'User feedback integration' ] } }, 'ghibli-transformer':
  { title: 'Turn Keshi Photos into Ghibli Style Images', type: 'Image',
  description: 'AI-powered tool to transform photos into Studio Ghibli-style
  illustrations.', tags: ['AI', 'Art'], rating: '4.9 (121 votes)', creator:
  'Tommy Zhang', createdDate: '2024-04-18', contentPreview:
  'image-preview2.jpg', details: { description: 'This AI tool uses style
  transfer techniques to transform ordinary photos into beautiful Studio
  Ghibli-style illustrations.', features: [ 'AI style transfer', 'Batch
  processing', 'Quality adjustments', 'Custom Ghibli styles', 'Fast processing'
  ], technologies: 'This would use machine learning frameworks like TensorFlow
  or PyTorch with neural style transfer algorithms.', implementation: [ 'Train
  style transfer model', 'Create web interface', 'Implement batch processing',
  'Optimize for speed', 'User testing and refinement' ] } },
  'album-cover-animations': { title: 'Animating Classic Rock Album Covers into
  Videos', type: 'Video', description: 'Tool to create animated videos of
  classic rock album covers with music synchronization.', tags:
  ['Entertainment', 'Music'], rating: '4.6 (64 votes)', creator: 'James Miller',
  createdDate: '2024-03-30', contentPreview: 'video-preview2.jpg', details: {
  description: 'This tool brings classic rock album covers to life with subtle
  animations synchronized to the original music.', features: [ 'Album cover
  animations', 'Music synchronization', 'Custom animation styles', 'Music
  library integration', 'Social sharing' ], technologies: 'This would use video
  editing APIs, animation libraries, and music synchronization technologies.',
  implementation: [ 'Develop animation engine', 'Integrate music APIs', 'Create
  template system', 'Implement sharing features', 'User content management' ] }
  }, 'periodic-sound-app': { title: 'Periodic Elements Sound App', type:
  'Website', description: 'Interactive periodic table with sound effects for
  each element.', tags: ['Education', 'Science'], rating: '4.5 (91 votes)',
  creator: 'Dr. Amanda Foster', createdDate: '2024-02-05', contentPreview:
  'website-preview2.jpg', details: { description: 'This educational tool
  enhances the learning experience of the periodic table by adding unique sounds
  and facts for each element.', features: [ 'Element-specific sounds', 'Detailed
  information', 'Interactive quizzes', 'Audio pronunciation', 'Learning progress
  tracking' ], technologies: 'This would use web audio API, HTML5, CSS3, and
  JavaScript with educational content management.', implementation: [ 'Create
  audio library', 'Design interactive interface', 'Add educational content',
  'Implement quiz feature', 'Track user progress' ] } }, 'texas-relocation': {
  title: 'Incentives for Relocating to Texas', type: 'Code', description:
  'Analysis of tax benefits and incentives for businesses moving to Texas.',
  tags: ['Business', 'Finance'], rating: '4.3 (38 votes)', creator: 'Kevin
  Thompson', createdDate: '2024-01-15', contentPreview: 'code-preview.jpg',
  details: { description: 'This analysis provides comprehensive information
  about the benefits of relocating businesses to Texas.', features: [ 'Tax
  comparison tools', 'Incentive calculators', 'Location analysis', 'Business
  statistics', 'Comparison charts' ], technologies: 'This would use data
  visualization libraries, backend processing for calculations, and modern web
  frameworks.', implementation: [ 'Gather tax data', 'Design calculation tools',
  'Create visualizations', 'Implement comparison features', 'Regular data
  updates' ] } } }; const idea = ideasData[ideaSlug]; if (idea) { // Update the
  content based on the idea document.querySelector('.idea-title').textContent =
  idea.title; document.querySelector('.idea-type').textContent = idea.type;
  document.querySelector('.idea-description').textContent = idea.description; //
  Update creator and date if (document.querySelector('.idea-created')) {
  document.querySelector('.idea-created').textContent = `by ${idea.creator} on
  ${idea.createdDate}`; } // Update tags const tagsContainer =
  document.querySelector('.idea-tags'); if (tagsContainer) { // Replace tags
  container with new tags const tagsHtml = idea.tags.map(tag => `<span
  class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full
  idea-tag">${tag}</span>` ).join(''); tagsContainer.innerHTML = tagsHtml; } //
  Update rating document.querySelector('.idea-rating').textContent =
  idea.rating; // Update details section if (idea.details) {
  document.querySelector('.prose > p').textContent = idea.details.description;
  // Update features list const featuresList = document.querySelector('.prose
  ul'); if (featuresList) { featuresList.innerHTML =
  idea.details.features.map(feature => `<li>${feature}</li>` ).join(''); } //
  Update technologies const technologiesElement = document.querySelector('.prose
  p:nth-of-type(2)'); if (technologiesElement) { technologiesElement.textContent
  = idea.details.technologies; } // Update implementation list const
  implementationList = document.querySelector('.prose ol'); if
  (implementationList) { implementationList.innerHTML =
  idea.details.implementation.map(step => `<li>${step}</li>` ).join(''); } } //
  Update preview image if (idea.contentPreview) { const previewElement =
  document.querySelector('.idea-preview'); if (previewElement) { // For now, use
  a consistent placeholder pattern previewElement.style.backgroundImage =
  `url('https://placehold.co/600x400/3b82f6/FFFFFF?text=${encodeURIComponent(idea.type)
  || 'Preview'}')`; previewElement.innerHTML = ''; // Clear any placeholder text
  } } else { // Use default placeholder if no contentPreview const
  previewElement = document.querySelector('.idea-preview'); if (previewElement)
  { previewElement.style.backgroundImage =
  "url('https://placehold.co/600x400/e5e7eb/6b7280?text=Idea+Preview')";
  previewElement.innerHTML = ''; // Clear any placeholder text } } } else { //
  If idea not found, show a default message
  document.querySelector('.idea-title').textContent = 'Idea Not Found';
  document.querySelector('.idea-description').textContent = 'The requested idea
   could not be found.'; } });

   // Voting functionality
   function initializeVoting() {
     const checkboxes = document.querySelectorAll('input[type="checkbox"]');

     checkboxes.forEach(checkbox => {
       checkbox.addEventListener('change', updateOverallRating);
     });

     // Load existing votes for this idea
     loadVotesForIdea(ideaSlug);

     // Submit vote button
     document.getElementById('submit-vote').addEventListener('click', () => {
       submitVote(ideaSlug);
     });
   }

   function updateOverallRating() {
     const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked');
     const totalQuestions = 6;
     const checkedCount = checkedBoxes.length;

     if (checkedCount > 0) {
       // Calculate rating out of 5 based on percentage of questions answered positively
       const rating = ((checkedCount / totalQuestions) * 5).toFixed(1);
       document.querySelector('.overall-rating').textContent = rating;
       document.getElementById('submit-vote').disabled = false;
     } else {
       document.querySelector('.overall-rating').textContent = 'Not rated yet';
       document.getElementById('submit-vote').disabled = true;
     }
   }

   async function loadVotesForIdea(ideaSlug) {
     try {
       const response = await fetch(`/api/v1/ideas/${ideaSlug}/votes`);
       const ideaVotes = await response.json();

       if (ideaVotes.length > 0) {
         // Calculate average number of positive answers per vote
         const positiveAnswers = ideaVotes.map(vote => {
           let count = 0;
           if (vote.marketViability && vote.marketViability > 0) count++;
           if (vote.realWorldProblem && vote.realWorldProblem > 0) count++;
           if (vote.innovation && vote.innovation > 0) count++;
           if (vote.technicalFeasibility && vote.technicalFeasibility > 0) count++;
           if (vote.scalability && vote.scalability > 0) count++;
           if (vote.marketSurvival && vote.marketSurvival > 0) count++;
           return count;
         });

         const avgPositiveAnswers = positiveAnswers.reduce((a, b) => a + b, 0) / positiveAnswers.length;
         const communityScore = ((avgPositiveAnswers / 6) * 5).toFixed(1);

         document.querySelector('.community-score').textContent = communityScore;
         document.querySelector('.idea-rating').textContent = `${communityScore} (${ideaVotes.length} votes)`;
       } else {
         // Reset to default if no votes
         document.querySelector('.idea-rating').textContent = idea.rating || 'No rating yet';
         document.querySelector('.community-score').textContent = 'N/A';
       }
     } catch (error) {
       console.error('Error loading votes:', error);
       document.querySelector('.idea-rating').textContent = idea.rating || 'No rating yet';
       document.querySelector('.community-score').textContent = 'N/A';
     }
   }

   async function submitVote(ideaSlug) {
     const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked');

     if (checkedBoxes.length === 0) {
       alert('Please check at least one question before submitting your evaluation.');
       return;
     }

     // Convert checkbox selections to the API format (1 for checked, 0 for unchecked)
     const voteData = {
       marketViability: document.querySelector('input[name="question-3"]').checked ? 1 : 0,
       realWorldProblem: document.querySelector('input[name="question-1"]').checked ? 1 : 0,
       innovation: document.querySelector('input[name="question-4"]').checked ? 1 : 0,
       technicalFeasibility: document.querySelector('input[name="question-2"]').checked ? 1 : 0,
       scalability: document.querySelector('input[name="question-5"]').checked ? 1 : 0,
       marketSurvival: document.querySelector('input[name="question-6"]').checked ? 1 : 0
     };

     try {
       const response = await fetch(`/api/v1/ideas/${ideaSlug}/votes`, {
         method: 'POST',
         headers: {
           'Content-Type': 'application/json',
         },
         body: JSON.stringify(voteData)
       });

       if (response.ok) {
         // Reload averages
         await loadVotesForIdea(ideaSlug);

         // Reset form
         document.querySelectorAll('input[type="checkbox"]').forEach(input => input.checked = false);
         updateOverallRating();

         // Show success message
         showSuccessMessage();
       } else {
         const error = await response.json();
         alert('Error submitting evaluation: ' + error.error);
       }
     } catch (error) {
       console.error('Error submitting vote:', error);
       alert('Error submitting evaluation. Please try again.');
     }
   }

   function showSuccessMessage() {
     // Create success message element
     const successDiv = document.createElement('div');
     successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-bounce';
     successDiv.innerHTML = `
       <div class="flex items-center">
         <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
           <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
         </svg>
         Evaluation submitted successfully!
       </div>
     `;

     document.body.appendChild(successDiv);

     // Remove after 3 seconds
     setTimeout(() => {
       successDiv.remove();
     }, 3000);
   }

   // Initialize voting after idea is loaded
   initializeVoting();
</script>