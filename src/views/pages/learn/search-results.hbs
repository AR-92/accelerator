<div class='flex flex-col gap-6'>
   <div class='flex items-center justify-between'>
     <div class='grid gap-1'>
       <h1 class='font-heading text-2xl font-semibold dark:text-white'>
         Search Results
         {{#if searchQuery}}
         for "{{searchQuery}}"
         {{/if}}
       </h1>
       {{#if resultCount}}
       <p class='text-base text-muted-foreground'>Found {{resultCount}} result{{#if (gt resultCount 1)}}s{{/if}}</p>
       {{else}}
       <p class='text-base text-muted-foreground'>No results found</p>
       {{/if}}
     </div>
   </div>

   <!-- Search Filters -->
   <div class='bg-card p-6 rounded-lg shadow-sm border border-border'>
     <div class='flex flex-wrap gap-4 items-end'>
       <div class='flex-1 min-w-64'>
         <label class='block text-sm font-medium text-foreground mb-2'>Search Query</label>
         <input
           type='text'
           id='search-input'
           value='{{searchQuery}}'
           placeholder='Search articles...'
           class='w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary'
         >
       </div>
       <div class='min-w-48'>
         <label class='block text-sm font-medium text-foreground mb-2'>Category</label>
         <select id='category-filter' class='w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary'>
           <option value=''>All Categories</option>
           {{#each categories}}
           <option value='{{slug}}' {{#if (eq slug ../currentCategory)}}selected{{/if}}>{{name}}</option>
           {{/each}}
         </select>
       </div>
       <div class='min-w-40'>
         <label class='block text-sm font-medium text-foreground mb-2'>Difficulty</label>
         <select id='difficulty-filter' class='w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary'>
           <option value=''>All Levels</option>
           <option value='beginner'>Beginner</option>
           <option value='intermediate'>Intermediate</option>
           <option value='advanced'>Advanced</option>
         </select>
       </div>
       <button id='search-btn' class='px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors'>
         {{lucide 'Search' 'w-4 h-4'}}
         Search
       </button>
     </div>
   </div>

  {{#if error}}
  <div class='bg-destructive/10 border border-destructive/20 p-4 rounded-lg'>
    <p class='text-destructive'>{{error}}</p>
  </div>
  {{/if}}

  {{#if articles}}
  <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
    {{#each articles}}
    <article class='bg-card p-6 rounded-lg shadow-sm border border-border hover:shadow-md transition-shadow'>
      <div class='flex items-start justify-between mb-4'>
        <div class='flex items-center gap-2'>
          <span class='px-2 py-1 bg-primary/10 text-primary text-xs rounded'>
            {{difficultyLevel}}
          </span>
          <span class='text-muted-foreground text-xs'>{{readTimeMinutes}} min</span>
        </div>
        {{#if isFeatured}}
        <span class='px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded'>
          Featured
        </span>
        {{/if}}
      </div>

      <h3 class='text-lg font-semibold text-foreground mb-2'>
        <a href='/pages/learn/article/{{slug}}' class='hover:text-primary transition-colors'>
          {{title}}
        </a>
      </h3>

      {{#if excerpt}}
      <p class='text-muted-foreground text-sm mb-4 line-clamp-3'>{{excerpt}}</p>
      {{/if}}

      <div class='flex items-center justify-between'>
        <div class='flex items-center gap-2'>
          {{#if authorImage}}
          <img src='{{authorImage}}' alt='{{authorName}}' class='w-6 h-6 rounded-full'>
          {{/if}}
          <span class='text-xs text-muted-foreground'>{{authorName}}</span>
        </div>
        <div class='flex items-center gap-2 text-xs text-muted-foreground'>
          <span>{{lucide 'Eye' 'w-3 h-3'}}</span>
          <span>{{viewCount}}</span>
        </div>
      </div>

      {{#if tags}}
      <div class='mt-4 flex flex-wrap gap-1'>
        {{#each tags}}
        <span class='px-2 py-1 bg-muted text-muted-foreground text-xs rounded'>
          {{this}}
        </span>
        {{/each}}
      </div>
      {{/if}}
    </article>
    {{/each}}
  </div>
  {{/if}}

   {{#if articles}}
   <!-- Pagination -->
   <div class='mt-8 flex items-center justify-between'>
     <div class='text-sm text-muted-foreground'>
       Showing {{offsetStart}}-{{offsetEnd}} of {{totalResults}} results
     </div>
     <div class='flex items-center gap-2'>
       {{#if hasPrevious}}
       <a href='?q={{searchQuery}}{{#if currentCategory}}&category={{currentCategory}}{{/if}}{{#if currentDifficulty}}&difficulty={{currentDifficulty}}{{/if}}&offset={{previousOffset}}'
          class='px-3 py-2 border border-border rounded-md hover:bg-muted transition-colors'>
         {{lucide 'ChevronLeft' 'w-4 h-4'}}
         Previous
       </a>
       {{/if}}

       <span class='px-3 py-2 text-sm text-muted-foreground'>
         Page {{currentPage}} of {{totalPages}}
       </span>

       {{#if hasNext}}
       <a href='?q={{searchQuery}}{{#if currentCategory}}&category={{currentCategory}}{{/if}}{{#if currentDifficulty}}&difficulty={{currentDifficulty}}{{/if}}&offset={{nextOffset}}'
          class='px-3 py-2 border border-border rounded-md hover:bg-muted transition-colors'>
         Next
         {{lucide 'ChevronRight' 'w-4 h-4'}}
       </a>
       {{/if}}
     </div>
   </div>
   {{/if}}

   {{#unless articles}}
   <div class='text-center py-12'>
     <div class='w-16 h-16 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center'>
       {{lucide 'Search' 'w-8 h-8 text-muted-foreground'}}
     </div>
     <h3 class='text-lg font-medium text-foreground mb-2'>No articles found</h3>
     <p class='text-muted-foreground mb-6'>
       {{#if searchQuery}}
       Try adjusting your search terms or browse our learning categories.
       {{else}}
       Start exploring our learning content.
       {{/if}}
     </p>
     <div class='flex flex-wrap justify-center gap-3'>
       <a href='/pages/learn' class='px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90'>
         Browse All Content
       </a>
       <a href='/pages/learn/getting-started' class='px-4 py-2 border border-border rounded-md hover:bg-muted'>
         Getting Started
       </a>
       <a href='/pages/learn/courses' class='px-4 py-2 border border-border rounded-md hover:bg-muted'>
         Courses
       </a>
     </div>
   </div>
   {{/unless}}
</div>

 <style>
   .line-clamp-3 {
     display: -webkit-box;
     -webkit-line-clamp: 3;
     -webkit-box-orient: vertical;
     overflow: hidden;
   }
 </style>

 <script>
   document.addEventListener('DOMContentLoaded', function() {
     const searchInput = document.getElementById('search-input');
     const categoryFilter = document.getElementById('category-filter');
     const difficultyFilter = document.getElementById('difficulty-filter');
     const searchBtn = document.getElementById('search-btn');

     function performSearch() {
       const query = searchInput.value.trim();
       const category = categoryFilter.value;
       const difficulty = difficultyFilter.value;

       if (query.length < 2) {
         alert('Search query must be at least 2 characters');
         return;
       }

       // Build URL with parameters
       const params = new URLSearchParams();
       params.set('q', query);
       if (category) params.set('category', category);
       if (difficulty) params.set('difficulty', difficulty);

       // Redirect to search with filters
       window.location.href = `/pages/learn/search?${params.toString()}`;
     }

     // Event listeners
     if (searchBtn) searchBtn.addEventListener('click', performSearch);
     if (searchInput) {
       searchInput.addEventListener('keypress', function(e) {
         if (e.key === 'Enter') {
           performSearch();
         }
       });
     }

     // Auto-search on filter change
     if (categoryFilter) {
       categoryFilter.addEventListener('change', function() {
         if (searchInput && searchInput.value.trim().length >= 2) {
           performSearch();
         }
       });
     }

     if (difficultyFilter) {
       difficultyFilter.addEventListener('change', function() {
         if (searchInput && searchInput.value.trim().length >= 2) {
           performSearch();
         }
       });
     }
   });
 </script>