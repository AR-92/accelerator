<!-- New Project Creation Page -->
<div class="flex flex-col min-h-screen w-full">
    <main class="flex w-full flex-grow items-center justify-center">
        <div class="flex flex-col max-w-3xl w-full px-4 mx-auto">
            <!-- Header -->
            <header class="w-full flex flex-col items-center gap-10 mb-7">
                <h1 class="text-2xl font-sans font-medium text-foreground mb-4">
                    What problem are you trying to solve?
                </h1>
            </header>

            <!-- Form / Input area -->
            <form id="new-project-form" class="flex flex-col gap-1 w-full" method="post" action="/projects/new">
                <!-- CSRF Token (Important for security) -->
                <input type="hidden" name="csrf_token" value="{{csrfToken}}">

                <div class="flex flex-col w-full">
                    <div class="relative">
                        <div class="flex flex-col gap-3 rounded-[22px] transition-all relative py-3 max-h-[300px] border border-input bg-background shadow-sm">
                            <!-- textarea wrapper -->
                            <div class="overflow-y-auto pl-4 pr-2">
                                <label for="assistant-prompt" class="sr-only">Describe your project requirements</label>
                                <textarea 
                                    id="assistant-prompt" 
                                    name="prompt" 
                                    rows="2"
                                    placeholder="Describe your project requirements..." 
                                    aria-label="Describe your project requirements"
                                    aria-describedby="prompt-help"
                                    class="flex w-full rounded-md border-0 bg-transparent p-0 pt-[1px] text-base placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 overflow-hidden resize-none min-h-[40px] max-h-40"
                                    required
                                ></textarea>
                                <p id="prompt-help" class="sr-only">Enter your project description or requirements</p>
                            </div>

                            <!-- toolbar -->
                            <div class="px-3 flex gap-2 items-center">
                                <div class="flex gap-2 items-center flex-shrink-0">
                                    <!-- Add button -->
                                    <button type="button" 
                                        aria-label="Attach file" 
                                        class="rounded-full border border-input inline-flex items-center justify-center gap-1 cursor-pointer text-xs text-muted-foreground hover:bg-accent w-8 h-8 p-0 shrink-0 transition-colors"
                                        onclick="document.getElementById('file-upload').click();">
                                        {{lucide 'Paperclip' 'lucide lucide-paperclip size-4'}}
                                        <input type="file" id="file-upload" class="hidden" multiple>
                                    </button>

                                    <!-- segmented control (was li list) -->
                                    <div class="border border-input bg-accent h-8 p-[2px] flex items-center rounded-full relative">
                                        <ul class="flex items-center h-full list-none p-0 m-0" role="tablist" aria-label="Input modes">
                                            <li class="flex items-center h-full" role="presentation">
                                                <button 
                                                    type="button" 
                                                    role="tab" 
                                                    aria-selected="true" 
                                                    aria-controls="tab-text"
                                                    id="tab-text-btn"
                                                    class="text-sm leading-5 font-medium text-muted-foreground hover:text-foreground data-[active]:font-semibold transition-colors duration-200 relative z-10 h-full p-0 px-2.5 min-w-0 rounded-full"
                                                    data-active>
                                                    <!-- Text mode icon -->
                                                    {{lucide 'Type' 'lucide lucide-type size-4'}}
                                                </button>
                                                <!-- Active state indicator -->
                                                <div class="absolute inset-0 bg-background shadow-sm rounded-full pointer-events-none opacity-100"></div>
                                            </li>

                                            <li class="flex items-center h-full" role="presentation">
                                                <button 
                                                    type="button" 
                                                    role="tab" 
                                                    aria-selected="false" 
                                                    aria-controls="tab-voice"
                                                    id="tab-voice-btn"
                                                    class="text-sm leading-5 font-medium text-muted-foreground hover:text-foreground transition-colors duration-200 relative z-10 h-full p-0 px-2.5 min-w-0 rounded-full">
                                                    {{lucide 'Mic' 'lucide lucide-mic size-4'}}
                                                </button>
                                            </li>

                                            <li class="flex items-center h-full" role="presentation">
                                                <button 
                                                    type="button" 
                                                    role="tab" 
                                                    aria-selected="false" 
                                                    aria-controls="tab-text"
                                                    id="tab-chat-btn"
                                                    class="text-sm leading-5 font-medium text-muted-foreground hover:text-foreground transition-colors duration-200 relative z-10 h-full p-0 px-2.5 min-w-0 rounded-full">
                                                    {{lucide 'MessageCircle' 'lucide lucide-message-circle size-4'}}
                                                </button>
                                            </li>
                                        </ul>
                                    </div>

                                    <!-- Connector / integration options -->
                                    <button type="button" aria-label="Integration options"
                                        class="flex items-center gap-1 p-2 cursor-pointer rounded-full border border-input hover:bg-accent transition-colors">
                                        {{lucide 'Link' 'lucide lucide-link size-4'}}
                                    </button>
                                </div>

                                <!-- Submit button on the right -->
                                <div class="min-w-0 flex gap-2 ml-auto flex-shrink items-center">
                                    <button 
                                        type="submit" 
                                        aria-label="Create project"
                                        class="inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-8 w-8 p-0"
                                    >
                                        {{lucide 'Plus' 'lucide lucide-plus size-4'}}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content options / presets -->
                <div class="relative w-full mt-4">
                    <fieldset class="w-full border-0 p-0 m-0">
                        <legend class="sr-only">Content options</legend>
                        <div class="w-full flex flex-col justify-center items-center gap-4">
                            <div class="flex justify-center items-center gap-2 flex-wrap">
                                <!-- option buttons -->
                                <button type="button" 
                                    aria-label="Insert Image" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="image">
                                    {{lucide 'Image' 'lucide lucide-image size-4'}}
                                    <span>Image</span>
                                </button>

                                <button type="button" 
                                    aria-label="Insert Slides" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="slides">
                                    {{lucide 'Presentation' 'lucide lucide-presentation size-4'}}
                                    <span>Slides</span>
                                </button>

                                <button type="button" 
                                    aria-label="Insert Website" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="website">
                                    {{lucide 'Globe' 'lucide lucide-globe size-4'}}
                                    <span>Website</span>
                                </button>

                                <button type="button" 
                                    aria-label="Insert Spreadsheet" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="spreadsheet">
                                    {{lucide 'FileSpreadsheet' 'lucide lucide-file-spreadsheet size-4'}}
                                    <span>Spreadsheet</span>
                                </button>

                                <button type="button" 
                                    aria-label="Insert Visualization" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="visualization">
                                    {{lucide 'BarChart' 'lucide lucide-bar-chart size-4'}}
                                    <span>Visualization</span>
                                </button>

                                <button type="button" 
                                    aria-label="More options" 
                                    class="h-9 px-4 py-2 rounded-full border border-input flex justify-center items-center gap-1.5 hover:bg-accent text-sm font-medium transition-colors"
                                    data-content-type="more">
                                    {{lucide 'MoreHorizontal' 'lucide lucide-more-horizontal size-4'}}
                                    <span>More</span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </form>
        </div>
    </main>
    
    <!-- Footer -->
    <footer id="main-content" class="py-4 w-full flex justify-center">
        <a  hx-get="/explore-ideas" hx-target="#main-content" class="flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors">
            {{lucide 'Sparkles' 'lucide lucide-sparkles size-4'}}
            <span>Explore More Ideas</span>
        </a>
    </footer>
</div>