<div class='flex flex-col gap-4 lg:gap-6'>
    <!-- Header -->
    <div class='flex items-center justify-between'>
      <div class='grid gap-1'>
        <h1 class='font-heading text-2xl font-semibold text-foreground dark:text-white'>Idea Details</h1>
        <p class='text-base text-muted-foreground'>{{idea.title}}</p>
      </div>
      <div class='flex gap-2'>
        <button onclick="editIdea({{idea.id}})" class='inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2'>
          {{lucide 'Edit' 'w-4 h-4 mr-2'}}
          Edit Idea
        </button>
        <button onclick="deleteIdea({{idea.id}}, '{{idea.title}}')" class='inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground shadow hover:bg-destructive/90 h-9 px-4 py-2'>
          {{lucide 'Trash2' 'w-4 h-4 mr-2'}}
          Delete Idea
        </button>
      </div>
    </div>

    <!-- Idea Details Card -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <div class='grid grid-cols-1 md:grid-cols-2 gap-6'>
        <!-- Basic Information -->
        <div class='space-y-4'>
          <h2 class='text-lg font-semibold text-foreground'>Basic Information</h2>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Title</label>
            <p class='text-foreground font-medium'>{{idea.title}}</p>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Href</label>
            <p class='text-foreground font-mono text-sm'>{{idea.href}}</p>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Type</label>
            <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400'>
              {{idea.type}}
            </span>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Rating</label>
             <div class='flex items-center gap-2'>
               {{#if (gt idea.rating 7)}}
                 <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400'>
                   {{idea.rating}}/10
                 </span>
                 <div class='flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2'>
                   <div class='h-2 rounded-full bg-green-500' style='width: {{multiply idea.rating 10}}%'></div>
                 </div>
               {{else if (gt idea.rating 4)}}
                 <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400'>
                   {{idea.rating}}/10
                 </span>
                 <div class='flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2'>
                   <div class='h-2 rounded-full bg-yellow-500' style='width: {{multiply idea.rating 10}}%'></div>
                 </div>
               {{else}}
                 <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400'>
                   {{idea.rating}}/10
                 </span>
                 <div class='flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2'>
                   <div class='h-2 rounded-full bg-red-500' style='width: {{multiply idea.rating 10}}%'></div>
                 </div>
               {{/if}}
             </div>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Favorite</label>
            {{#if idea.isFavorite}}
            <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400'>
              â˜… Yes
            </span>
            {{else}}
            <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400'>
              No
            </span>
            {{/if}}
          </div>
        </div>

        <!-- Metadata -->
        <div class='space-y-4'>
          <h2 class='text-lg font-semibold text-foreground'>Metadata</h2>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>User ID</label>
            <p class='text-foreground font-mono text-sm'>{{idea.userId}}</p>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Created At</label>
            <p class='text-foreground'>{{formatDate idea.createdAt}}</p>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Updated At</label>
            <p class='text-foreground'>{{formatDate idea.updatedAt}}</p>
          </div>

          <div>
            <label class='block text-sm font-medium text-muted-foreground mb-1'>Type Icon</label>
            <p class='text-foreground'>{{idea.typeIcon}}</p>
          </div>
        </div>
      </div>

      <!-- Description -->
      <div class='mt-6'>
        <label class='block text-sm font-medium text-muted-foreground mb-2'>Description</label>
        <div class='bg-muted/50 rounded-md p-4'>
          {{#if idea.description}}
          <p class='text-foreground whitespace-pre-wrap'>{{idea.description}}</p>
          {{else}}
          <p class='text-muted-foreground italic'>No description provided</p>
          {{/if}}
        </div>
      </div>

      <!-- Tags -->
      {{#if idea.tags}}
      <div class='mt-6'>
        <label class='block text-sm font-medium text-muted-foreground mb-2'>Tags</label>
        <div class='flex flex-wrap gap-2'>
          {{#each idea.tags}}
          <span class='inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400'>
            {{this}}
          </span>
          {{/each}}
        </div>
      </div>
      {{/if}}
    </div>

    <!-- Back Button -->
    <div class='flex justify-start'>
      <a href='/admin/ideas' class='inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2'>
        {{lucide 'ArrowLeft' 'w-4 h-4 mr-2'}}
        Back to Ideas
      </a>
    </div>
  </div>

  <!-- Edit Idea Modal -->
  <div id="editIdeaModal" class="fixed inset-0 bg-background/80 backdrop-blur-sm overflow-y-auto h-full w-full hidden">
    <div class="relative top-20 mx-auto p-5 border border-border w-96 shadow-lg rounded-md bg-card">
      <div class="mt-3">
        <h3 class="text-lg font-medium text-foreground mb-4">Edit Idea</h3>
        <form id="editIdeaForm">
          <input type="hidden" id="editIdeaId" value="{{idea.id}}">
          <div class="mb-4">
            <label class="block text-sm font-medium text-foreground mb-2">Title</label>
            <input type="text" id="editIdeaTitle" value="{{idea.title}}" class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring" required>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-foreground mb-2">Type</label>
            <select id="editIdeaType" class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring">
              <option value="product" {{#if (eq idea.type 'product')}}selected{{/if}}>Product</option>
              <option value="service" {{#if (eq idea.type 'service')}}selected{{/if}}>Service</option>
              <option value="feature" {{#if (eq idea.type 'feature')}}selected{{/if}}>Feature</option>
              <option value="improvement" {{#if (eq idea.type 'improvement')}}selected{{/if}}>Improvement</option>
            </select>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-foreground mb-2">Rating (1-10)</label>
            <input type="number" id="editIdeaRating" min="1" max="10" value="{{idea.rating}}" class="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring" required>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-foreground mb-2">Description</label>
            <textarea id="editIdeaDescription" rows="3" class="flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring">{{idea.description}}</textarea>
          </div>
          <div class="flex justify-end gap-2">
            <button type="button" onclick="closeEditModal()" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2">Cancel</button>
            <button type="submit" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
  // Helper functions for date formatting
  function formatDate(dateString) {
    return new Date(dateString).toLocaleDateString();
  }

  // Modal functions
  function editIdea(ideaId) {
    document.getElementById('editIdeaModal').classList.remove('hidden');
  }

  function closeEditModal() {
    document.getElementById('editIdeaModal').classList.add('hidden');
  }

  function deleteIdea(ideaId, ideaTitle) {
    Toast.warning(`Are you sure you want to delete the idea "${ideaTitle}"? This action cannot be undone.`);
    fetch(`/admin/api/ideas/${ideaId}`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
      },
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        window.location.href = '/admin/ideas';
      } else {
        Toast.error('Error deleting idea: ' + data.error);
      }
    });
  }

  // Form handlers
  document.getElementById('editIdeaForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const ideaId = document.getElementById('editIdeaId').value;
    const title = document.getElementById('editIdeaTitle').value;
    const type = document.getElementById('editIdeaType').value;
    const rating = parseInt(document.getElementById('editIdeaRating').value);
    const description = document.getElementById('editIdeaDescription').value;

    fetch(`/admin/api/ideas/${ideaId}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ title, type, rating, description }),
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        location.reload();
      } else {
          Toast.error('Error updating idea: ' + data.error);
      }
    });
  });
  </script>