<div class='flex flex-col gap-4 lg:gap-6'>
  <div class='flex items-center justify-between'>
    <div class='grid gap-1'>
      <h1 class='font-heading text-2xl font-semibold text-foreground dark:text-white'>Admin Dashboard</h1>
      <p class='text-base text-muted-foreground'>Monitor your platform's performance and key metrics.</p>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class='grid grid-cols-1 gap-[17px] sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4'>
    <!-- Total Users -->
    <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <div class='flex items-center justify-between px-[10px] py-[4px]'>
        <div class='flex flex-col gap-[4px]'>
          <h3 class='text-[14px] font-[500] text-muted-foreground'>Total Users</h3>
          <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.users.total}}</p>
        </div>
        <div>
          <div style='background:#E3F2FD; border-radius: 6px;'>
            <div style='width:38px; height:38px; background:#E3F2FD; border-radius:50%; position:relative;'>
              <div class='flex items-center justify-center' style='width:35px; height:35px; background:#2196F3; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                {{lucide 'Users' 'w-4 h-4 text-white'}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
        {{lucide 'TrendingUp' 'w-5 h-4' style='color: #2196F3'}}
        <span class='text-[#2196F3] dark:text-blue-400'>+12%</span>Since last month
      </p>
    </div>

    <!-- Recent Users -->
    <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <div class='flex items-center justify-between px-[10px] py-[4px]'>
        <div class='flex flex-col gap-[4px]'>
          <h3 class='text-[14px] font-[500] text-muted-foreground'>New Users (7 days)</h3>
          <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.users.recent}}</p>
        </div>
        <div>
          <div style='background:#E8F5E8; border-radius: 6px;'>
            <div style='width:38px; height:38px; background:#E8F5E8; border-radius:50%; position:relative;'>
              <div class='flex items-center justify-center' style='width:35px; height:35px; background:#4CAF50; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                {{lucide 'UserPlus' 'w-4 h-4 text-white'}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
        {{lucide 'TrendingUp' 'w-5 h-4' style='color: #4CAF50'}}
        <span class='text-[#4CAF50] dark:text-green-400'>+8</span>Since last week
      </p>
    </div>

     <!-- Total Credits -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Total Credits</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.credits.total}}</p>
         </div>
         <div>
           <div style='background:#FFF3E0; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#FFF3E0; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#FF9800; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'Coins' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'TrendingUp' 'w-5 h-4' style='color: #FF9800'}}
         <span class='text-[#FF9800] dark:text-yellow-400'>+15%</span>Since last month
       </p>
     </div>

     <!-- Active Projects -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Active Projects</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.collaborations.totalProjects}}</p>
         </div>
         <div>
           <div style='background:#E1F5FE; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#E1F5FE; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#03A9F4; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'FolderOpen' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'Users' 'w-5 h-4' style='color: #03A9F4'}}
         <span class='text-[#03A9F4] dark:text-blue-400'>{{stats.collaborations.totalTeamMembers}} members</span> collaborating
       </p>
     </div>

     <!-- Help Articles -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Help Articles</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.content.help.total}}</p>
         </div>
         <div>
           <div style='background:#F3E5F5; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#F3E5F5; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#9C27B0; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'BookOpen' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'TrendingUp' 'w-5 h-4' style='color: #9C27B0'}}
         <span class='text-[#9C27B0] dark:text-purple-400'>+3</span>Since last month
       </p>
     </div>

     <!-- Total Packages -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Total Packages</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.packages.total}}</p>
         </div>
         <div>
           <div style='background:#E8EAF6; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#E8EAF6; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#3F51B5; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'Package' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'TrendingUp' 'w-5 h-4' style='color: #3F51B5'}}
         <span class='text-[#3F51B5] dark:text-indigo-400'>+2</span>Since last month
       </p>
     </div>

     <!-- Total Revenue -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Total Revenue</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>${{stats.billing.totalRevenue}}</p>
         </div>
         <div>
           <div style='background:#E8F5E8; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#E8F5E8; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#4CAF50; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'DollarSign' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'TrendingUp' 'w-5 h-4' style='color: #4CAF50'}}
         <span class='text-[#4CAF50] dark:text-green-400'>+12%</span>Since last month
       </p>
     </div>

     <!-- Active Rewards -->
     <div class='rounded-md bg-card px-2 py-[40px] text-card-foreground shadow-sm' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
       <div class='flex items-center justify-between px-[10px] py-[4px]'>
         <div class='flex flex-col gap-[4px]'>
           <h3 class='text-[14px] font-[500] text-muted-foreground'>Active Rewards</h3>
           <p class='text-[18px] font-[600] text-foreground dark:text-gray-100'>{{stats.rewards.activeRewards}}</p>
         </div>
         <div>
           <div style='background:#FFF3E0; border-radius: 6px;'>
             <div style='width:38px; height:38px; background:#FFF3E0; border-radius:50%; position:relative;'>
               <div class='flex items-center justify-center' style='width:35px; height:35px; background:#FF9800; border-radius:50%; position:absolute; top:1.5px; left:1.5px;'>
                 {{lucide 'Gift' 'w-4 h-4 text-white'}}
               </div>
             </div>
           </div>
         </div>
       </div>
       <p class='flex items-center gap-[4px] text-[13px] font-[500] text-muted-foreground'>
         {{lucide 'TrendingUp' 'w-5 h-4' style='color: #FF9800'}}
         <span class='text-[#FF9800] dark:text-yellow-400'>+5</span>Since last month
       </p>
     </div>
   </div>

  <!-- User Roles Breakdown -->
  <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
    <h3 class='text-lg font-medium text-foreground mb-6'>Users by Role</h3>
    <div class='space-y-4'>
      {{#each stats.users.byRole}}
      <div class='flex items-center justify-between p-4 rounded-lg bg-muted/30 border border-border/50'>
        <div class='flex items-center gap-3'>
          <div class='w-10 h-10 rounded-lg {{#if (eq this.role "admin")}}bg-red-100 dark:bg-red-900/20{{else if (eq this.role "corporate")}}bg-blue-100 dark:bg-blue-900/20{{else if (eq this.role "enterprise")}}bg-purple-100 dark:bg-purple-900/20{{else}}bg-green-100 dark:bg-green-900/20{{/if}} flex items-center justify-center'>
            {{#if (eq this.role "admin")}}
              {{lucide 'Shield' 'w-5 h-5 text-red-600 dark:text-red-400'}}
            {{else if (eq this.role "corporate")}}
              {{lucide 'Building2' 'w-5 h-5 text-blue-600 dark:text-blue-400'}}
            {{else if (eq this.role "enterprise")}}
              {{lucide 'Crown' 'w-5 h-5 text-purple-600 dark:text-purple-400'}}
            {{else}}
              {{lucide 'User' 'w-5 h-5 text-green-600 dark:text-green-400'}}
            {{/if}}
          </div>
          <div>
            <div class='text-sm font-medium text-foreground capitalize'>{{this.role}}</div>
            <div class='text-xs text-muted-foreground'>Active users</div>
          </div>
        </div>
        <div class='text-right'>
          <div class='text-2xl font-bold text-foreground'>{{this.count}}</div>
          <div class='text-xs text-muted-foreground'>
            {{#if (eq this.role "admin")}}Administrators{{else if (eq this.role "corporate")}}Corporate users{{else if (eq this.role "enterprise")}}Enterprise users{{else}}Startup users{{/if}}
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <!-- Quick Stats -->
    <div class='mt-6 pt-6 border-t border-border/50'>
      <div class='grid grid-cols-2 md:grid-cols-4 gap-4'>
        {{#each stats.users.byRole}}
        <div class='text-center'>
          <div class='text-lg font-bold {{#if (eq this.role "admin")}}text-red-600 dark:text-red-400{{else if (eq this.role "corporate")}}text-blue-600 dark:text-blue-400{{else if (eq this.role "enterprise")}}text-purple-600 dark:text-purple-400{{else}}text-green-600 dark:text-green-400{{/if}}'>{{this.count}}</div>
          <div class='text-xs text-muted-foreground capitalize'>{{this.role}}</div>
        </div>
        {{/each}}
      </div>
    </div>
  </div>

  <!-- Content Stats and Recent Activity -->
  <div class='grid grid-cols-1 lg:grid-cols-3 gap-6'>
    <!-- Help Content -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <h3 class='text-lg font-medium text-foreground mb-4'>Help Center</h3>
      <div class='space-y-3'>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Total Articles</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.help.total}}</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Published</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.help.published}}</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Draft</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.help.draft}}</span>
        </div>
      </div>
    </div>

    <!-- Learning Content -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <h3 class='text-lg font-medium text-foreground mb-4'>Learning Center</h3>
      <div class='space-y-3'>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Total Articles</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.learning.total}}</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Published</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.learning.published}}</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Draft</span>
          <span class='text-sm font-medium text-foreground'>{{stats.content.learning.draft}}</span>
        </div>
      </div>
    </div>

    <!-- System Health -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <h3 class='text-lg font-medium text-foreground mb-4'>System Health</h3>
      <div class='space-y-3'>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Uptime</span>
          <span class='text-sm font-medium text-foreground'>{{stats.system.uptime}}s</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Memory Used</span>
          <span class='text-sm font-medium text-foreground'>{{stats.system.memory.used}}MB</span>
        </div>
        <div class='flex justify-between'>
          <span class='text-sm text-muted-foreground'>Node Version</span>
          <span class='text-sm font-medium text-foreground'>{{stats.system.nodeVersion}}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity and New Users -->
  <div class='grid grid-cols-1 lg:grid-cols-2 gap-6'>
    <!-- Recent Activity -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <h3 class='text-lg font-medium text-foreground mb-4'>Recent Activity</h3>
       <div class='space-y-3'>
          {{#each stats.activity}}
          <div class='flex items-center gap-3'>
            <div class='flex-shrink-0'>
              <div class='w-8 h-8 {{#if (eq action "CREATE_USER")}}bg-green-100 dark:bg-green-900/20{{else if (eq action "UPDATE_USER_ROLE")}}bg-blue-100 dark:bg-blue-900/20{{else if (eq action "BAN_USER")}}bg-red-100 dark:bg-red-900/20{{else if (eq action "DELETE_USER")}}bg-red-100 dark:bg-red-900/20{{else}}bg-gray-100 dark:bg-gray-900/20{{/if}} rounded-full flex items-center justify-center'>
              {{#if (eq action "CREATE_USER")}}
                {{lucide 'UserPlus' 'w-4 h-4 text-green-600 dark:text-green-400'}}
              {{else if (eq action "UPDATE_USER_ROLE")}}
                {{lucide 'Settings' 'w-4 h-4 text-blue-600 dark:text-blue-400'}}
              {{else if (eq action "BAN_USER")}}
                {{lucide 'Ban' 'w-4 h-4 text-red-600 dark:text-red-400'}}
              {{else if (eq action "DELETE_USER")}}
                {{lucide 'Trash2' 'w-4 h-4 text-red-600 dark:text-red-400'}}
              {{else}}
                {{lucide 'Activity' 'w-4 h-4 text-gray-600 dark:text-gray-400'}}
              {{/if}}
            </div>
            <div class='flex-1 min-w-0'>
              <p class='text-sm text-foreground'>
                <span class='font-medium'>{{adminEmail}}</span>
                {{#if (eq action "CREATE_USER")}}
                  created a new user account
                {{else if (eq action "UPDATE_USER_ROLE")}}
                  updated user role to {{details.newRole}}
                {{else if (eq action "UPDATE_USER_CREDITS")}}
                  updated user credits
                {{else if (eq action "BAN_USER")}}
                  banned user{{#if details.reason}} ({{details.reason}}){{/if}}
                {{else if (eq action "UNBAN_USER")}}
                  unbanned user
                {{else if (eq action "DELETE_USER")}}
                  deleted user account
                {{else if (eq action "RESET_USER_PASSWORD")}}
                  reset user password
                {{else}}
                  performed {{action}}
                {{/if}}
              </p>
            </div>
            <div class='text-xs text-muted-foreground flex-shrink-0'>
              {{formatDate timestamp}}
            </div>
          </div>
         {{else}}
         <p class='text-sm text-muted-foreground'>No recent activity</p>
         {{/each}}
      </div>
    </div>

    <!-- New Users -->
    <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
      <h3 class='text-lg font-medium text-foreground mb-4'>New Users</h3>
      <div class='space-y-3'>
        {{#each stats.users.recentUsers}}
        <div class='flex items-center gap-3'>
          <div class='flex-shrink-0'>
            <div class='w-8 h-8 bg-muted rounded-full flex items-center justify-center'>
              {{lucide 'User' 'w-4 h-4 text-muted-foreground'}}
            </div>
          </div>
          <div class='flex-1 min-w-0'>
            <p class='text-sm font-medium text-foreground'>{{firstName}} {{lastName}}</p>
            <p class='text-sm text-muted-foreground'>{{email}}</p>
          </div>
          <div class='text-xs text-muted-foreground'>
            {{formatDate createdAt}}
          </div>
        </div>
        {{else}}
        <p class='text-sm text-muted-foreground'>No new users</p>
        {{/each}}
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
    <h3 class='text-lg font-medium text-foreground mb-4'>Quick Actions</h3>
    <div class='grid grid-cols-1 md:grid-cols-3 gap-4'>
      <a href='/admin/users' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
        {{lucide 'Users' 'w-8 h-8 text-primary mr-3'}}
        <div>
          <p class='font-medium text-foreground'>Manage Users</p>
          <p class='text-sm text-muted-foreground'>View and edit user accounts</p>
        </div>
      </a>

      <a href='/admin/content' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
        {{lucide 'FileText' 'w-8 h-8 text-primary mr-3'}}
        <div>
          <p class='font-medium text-foreground'>Manage Content</p>
          <p class='text-sm text-muted-foreground'>Edit help and learning articles</p>
        </div>
      </a>

       <a href='/admin/settings' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
         {{lucide 'Settings' 'w-8 h-8 text-primary mr-3'}}
         <div>
           <p class='font-medium text-foreground'>System Settings</p>
           <p class='text-sm text-muted-foreground'>Configure application settings</p>
         </div>
       </a>

       <a href='/admin/packages' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
         {{lucide 'Package' 'w-8 h-8 text-primary mr-3'}}
         <div>
           <p class='font-medium text-foreground'>Manage Packages</p>
           <p class='text-sm text-muted-foreground'>Create and edit credit packages</p>
         </div>
       </a>

       <a href='/admin/billing' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
         {{lucide 'CreditCard' 'w-8 h-8 text-primary mr-3'}}
         <div>
           <p class='font-medium text-foreground'>Manage Billing</p>
           <p class='text-sm text-muted-foreground'>View transactions and refunds</p>
         </div>
       </a>

       <a href='/admin/rewards' class='flex items-center p-4 border border-border rounded-lg hover:bg-muted transition-colors'>
         {{lucide 'Gift' 'w-8 h-8 text-primary mr-3'}}
         <div>
           <p class='font-medium text-foreground'>Manage Rewards</p>
           <p class='text-sm text-muted-foreground'>Grant rewards to users</p>
         </div>
       </a>
     </div>
  </div>
</div>