<div class='flex flex-col gap-4 lg:gap-6'>
   <!-- Header -->
   <div class='flex items-center justify-between'>
     <div class='grid gap-1'>
       <h1 class='font-heading text-2xl font-semibold text-foreground dark:text-white'>{{organization.name}}</h1>
       <p class='text-base text-muted-foreground'>Organization Details</p>
     </div>
     <div class='flex gap-2'>
        <button onclick="editOrganization()" class='inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2'>
          {{lucide 'Edit' 'w-4 h-4 mr-2'}}
          Edit Organization
        </button>
        <button onclick="deleteOrganization()" class='inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 h-9 px-4 py-2'>
          {{lucide 'Trash2' 'w-4 h-4 mr-2'}}
          Delete Organization
        </button>
     </div>
   </div>

  <!-- Organization Info Cards -->
  <div class='grid gap-4 md:grid-cols-2 lg:grid-cols-3'>
    <div class='rounded-lg border bg-card text-card-foreground shadow-sm p-6'>
      <div class='flex flex-row items-center justify-between space-y-0 pb-2'>
        <h3 class='tracking-tight text-sm font-medium'>Organization Type</h3>
        {{#if (eq organization.org_type 'corporate')}}
          {{lucide 'Building' 'h-4 w-4 text-blue-500'}}
        {{else if (eq organization.org_type 'enterprise')}}
          {{lucide 'Factory' 'h-4 w-4 text-green-500'}}
        {{else}}
          {{lucide 'Rocket' 'h-4 w-4 text-purple-500'}}
        {{/if}}
      </div>
      <div class='text-2xl font-bold capitalize'>{{organization.org_type}}</div>
    </div>
    <div class='rounded-lg border bg-card text-card-foreground shadow-sm p-6'>
      <div class='flex flex-row items-center justify-between space-y-0 pb-2'>
        <h3 class='tracking-tight text-sm font-medium'>Owner</h3>
        {{lucide 'User' 'h-4 w-4 text-muted-foreground'}}
      </div>
      <div class='text-2xl font-bold'>
        {{#if organization.owner_user_id}}
          User #{{organization.owner_user_id}}
        {{else}}
          No Owner
        {{/if}}
      </div>
    </div>
    <div class='rounded-lg border bg-card text-card-foreground shadow-sm p-6'>
      <div class='flex flex-row items-center justify-between space-y-0 pb-2'>
        <h3 class='tracking-tight text-sm font-medium'>Created</h3>
        {{lucide 'Calendar' 'h-4 w-4 text-muted-foreground'}}
      </div>
      <div class='text-2xl font-bold'>{{formatDate organization.created_at}}</div>
    </div>
  </div>

  <!-- Organization Details -->
  <div class='rounded-md bg-card text-card-foreground shadow-sm p-6' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
    <h2 class='text-lg font-medium text-foreground mb-4'>Organization Information</h2>
    <div class='grid gap-4 md:grid-cols-2'>
      <div>
        <label class='block text-sm font-medium text-foreground mb-2'>Organization ID</label>
        <p class='text-sm text-muted-foreground bg-muted px-3 py-2 rounded-md'>{{organization.id}}</p>
      </div>
      <div>
        <label class='block text-sm font-medium text-foreground mb-2'>Organization Name</label>
        <p class='text-sm text-muted-foreground bg-muted px-3 py-2 rounded-md'>{{organization.name}}</p>
      </div>
      <div>
        <label class='block text-sm font-medium text-foreground mb-2'>Type</label>
        <p class='text-sm text-muted-foreground bg-muted px-3 py-2 rounded-md capitalize'>{{organization.org_type}}</p>
      </div>
      <div>
        <label class='block text-sm font-medium text-foreground mb-2'>Owner User ID</label>
        <p class='text-sm text-muted-foreground bg-muted px-3 py-2 rounded-md'>
          {{#if organization.owner_user_id}}
            {{organization.owner_user_id}}
          {{else}}
            Not assigned
          {{/if}}
        </p>
      </div>
    </div>
  </div>

  <!-- Related Users -->
  {{#if users}}
  <div class='rounded-md bg-card text-card-foreground shadow-sm overflow-visible' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
    <div class='px-6 py-4 border-b border-border'>
      <h2 class='text-lg font-medium text-foreground'>Users in this Organization ({{users.length}})</h2>
    </div>
    <div class='overflow-x-auto'>
      <table class='w-full'>
        <thead>
          <tr class='border-b border-border'>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Name</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Email</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Role</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Credits</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Status</th>
          </tr>
        </thead>
        <tbody>
          {{#each users}}
          <tr class='border-b border-border hover:bg-muted/50'>
            <td class='p-4 align-middle'>
              <div class='font-medium text-foreground'>
                {{#if name}}{{name}}{{else}}{{first_name}} {{last_name}}{{/if}}
              </div>
            </td>
            <td class='p-4 align-middle'>
              <span class='text-sm text-muted-foreground'>{{email}}</span>
            </td>
            <td class='p-4 align-middle'>
              <span class='inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                {{#if (eq role 'admin')}}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300
                {{else if (eq role 'corporate')}}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300
                {{else if (eq role 'enterprise')}}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300
                {{else}}bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300{{/if}}'>
                {{capitalize role}}
              </span>
            </td>
            <td class='p-4 align-middle'>
              <span class='text-sm font-medium'>{{credits}}</span>
            </td>
            <td class='p-4 align-middle'>
              <span class='inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                {{#if (eq status 'active')}}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300
                {{else}}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300{{/if}}'>
                {{capitalize status}}
              </span>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
  {{/if}}

  <!-- Related Projects -->
  {{#if projects}}
  <div class='rounded-md bg-card text-card-foreground shadow-sm overflow-visible' style='box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;'>
    <div class='px-6 py-4 border-b border-border'>
      <h2 class='text-lg font-medium text-foreground'>Projects in this Organization ({{projects.length}})</h2>
    </div>
    <div class='overflow-x-auto'>
      <table class='w-full'>
        <thead>
          <tr class='border-b border-border'>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Title</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Status</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Owner</th>
            <th class='h-12 px-4 text-left align-middle font-medium text-muted-foreground'>Created</th>
          </tr>
        </thead>
        <tbody>
          {{#each projects}}
          <tr class='border-b border-border hover:bg-muted/50'>
            <td class='p-4 align-middle'>
              <div class='font-medium text-foreground'>{{title}}</div>
              {{#if description}}
                <div class='text-sm text-muted-foreground'>{{truncate description 100}}</div>
              {{/if}}
            </td>
            <td class='p-4 align-middle'>
              <span class='inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                {{#if (eq status 'active')}}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300
                {{else if (eq status 'completed')}}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300
                {{else}}bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300{{/if}}'>
                {{capitalize status}}
              </span>
            </td>
            <td class='p-4 align-middle'>
              <span class='text-sm text-muted-foreground'>User #{{user_id}}</span>
            </td>
            <td class='p-4 align-middle'>
              <span class='text-sm text-muted-foreground'>{{formatDate created_at}}</span>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
  {{/if}}
</div>

<script>
// Organization actions
function editOrganization() {
  // TODO: Implement edit organization
  alert('Edit organization functionality coming soon!');
}

function deleteOrganization() {
  if (confirm('Are you sure you want to delete this organization? This action cannot be undone.')) {
    // TODO: Implement delete organization
    alert('Delete organization functionality coming soon!');
  }
}

// Helper functions
function capitalize(str) {
  return str ? str.charAt(0).toUpperCase() + str.slice(1) : '';
}

function formatDate(dateStr) {
  return dateStr ? new Date(dateStr).toLocaleDateString() : '';
}

function truncate(str, length) {
  return str && str.length > length ? str.substring(0, length) + '...' : str;
}
</script>